    <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.11.3">
    <title>Exdn – exdn v2.1.1</title>
    <link rel="stylesheet" href="dist/app-ddd9717ad9.css" />
    <script src="dist/sidebar_items.js"></script>
  </head>
  <body data-type="modules">

    <div class="main">
<button class="sidebar-toggle">
  <i class="icon-menu"></i>
</button>
<section class="sidebar">
  <button class="sidebar-toggle">
    <i class="icon-menu"></i>
  </button>

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        exdn
      </h1>
      <h2 class="sidebar-projectVersion">
        v2.1.1
      </h2>
    </div>
    
  </a>

  <div class="sidebar-search">
    <i class="icon-search"></i>
    <input type="text" class="sidebar-searchInput" placeholder="search" autocomplete="off" />
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    

    
  </ul>

  <ul id="full-list" class="sidebar-fullList"></ul>
  <div class="sidebar-noResults"></div>
</section>

<section class="content">
  <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">exdn v2.1.1</small>
        Exdn
        
        
      </h1>

      
        <section id="moduledoc" class="docstring">
          <p>Exdn is a two-way translator between Elixir data structures and data
following the <a href="https://github.com/edn-format/edn">edn specification</a>;
it wraps the <a href="https://github.com/marianoguerra/erldn">erldn edn parser</a>
for Erlang, with some changes in the data formats.</p>
<h2>Examples</h2>
<pre><code class="iex elixir">iex&gt; Exdn.to_elixir! &quot;[1 :foo]&quot;
[1, :foo]

iex&gt; Exdn.to_elixir &quot;{1 :foo, 2 :bar}&quot;
{:ok, %{1 =&gt; :foo, 2 =&gt; :bar}}

iex&gt; Exdn.from_elixir! %{1 =&gt; :foo, 2 =&gt; :bar}
&quot;{1 :foo 2 :bar}&quot;

iex&gt; Exdn.from_elixir %{:foo =&gt; {:char, ?a}, {:char, ?b} =&gt; {:tag, :inst, &quot;1985-04-12T23:20:50.52Z&quot;} }
{:ok, &quot;{:foo \a \b #inst &quot;1985-04-12T23:20:50.52Z&quot;}&quot; }</code></pre>
<h2>Type mappings:</h2>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th style="text-align: left">edn</th><th style="text-align: left">Elixir generated by <code class="inline">to_elixir</code> functions (when no custom converter is provided)</th>
</tr>
</thead>
<tr>
<td style="text-align: left">integer</td><td style="text-align: left">integer</td>
</tr>
<tr>
<td style="text-align: left">float</td><td style="text-align: left">float</td>
</tr>
<tr>
<td style="text-align: left">boolean</td><td style="text-align: left">boolean</td>
</tr>
<tr>
<td style="text-align: left">nil</td><td style="text-align: left">nil (atom)</td>
</tr>
<tr>
<td style="text-align: left">char</td><td style="text-align: left">string</td>
</tr>
<tr>
<td style="text-align: left">string</td><td style="text-align: left">string</td>
</tr>
<tr>
<td style="text-align: left">list</td><td style="text-align: left">tagged list <code class="inline">{:list, [...]}</code></td>
</tr>
<tr>
<td style="text-align: left">vector</td><td style="text-align: left">list</td>
</tr>
<tr>
<td style="text-align: left">map</td><td style="text-align: left">map</td>
</tr>
<tr>
<td style="text-align: left">set</td><td style="text-align: left">mapset</td>
</tr>
<tr>
<td style="text-align: left">symbol</td><td style="text-align: left">tagged atom <code class="inline">{:symbol, atom}</code></td>
</tr>
<tr>
<td style="text-align: left">tagged elements</td><td style="text-align: left">call registered handler for that tag, fail if not found</td>
</tr>
</table>
<table>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th style="text-align: left">Elixir accepted by <code class="inline">from_elixir</code> functions</th><th style="text-align: left">edn</th>
</tr>
</thead>
<tr>
<td style="text-align: left">integer</td><td style="text-align: left">integer</td>
</tr>
<tr>
<td style="text-align: left">float</td><td style="text-align: left">float</td>
</tr>
<tr>
<td style="text-align: left">boolean</td><td style="text-align: left">boolean</td>
</tr>
<tr>
<td style="text-align: left">nil (atom)</td><td style="text-align: left">nil</td>
</tr>
<tr>
<td style="text-align: left">tagged integer <code class="inline">{:char, &lt;integer&gt;}</code></td><td style="text-align: left">char</td>
</tr>
<tr>
<td style="text-align: left">string</td><td style="text-align: left">string</td>
</tr>
<tr>
<td style="text-align: left">tagged list <code class="inline">{:list, [...]}</code></td><td style="text-align: left">list</td>
</tr>
<tr>
<td style="text-align: left">list</td><td style="text-align: left">vector</td>
</tr>
<tr>
<td style="text-align: left">map</td><td style="text-align: left">map</td>
</tr>
<tr>
<td style="text-align: left">struct</td><td style="text-align: left">map</td>
</tr>
<tr>
<td style="text-align: left">mapset</td><td style="text-align: left">set</td>
</tr>
<tr>
<td style="text-align: left">tagged atom <code class="inline">{:symbol, atom}</code></td><td style="text-align: left">symbol</td>
</tr>
<tr>
<td style="text-align: left">tagged tuple with tag and value <code class="inline">{:tag, Symbol, Value}</code></td><td style="text-align: left">tagged elements</td>
</tr>
</table>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <i class="icon-link"></i>
            </a>
            Summary
          </h1>
          

          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#evaluate_tagged_expr/3">evaluate_tagged_expr(arg, converter, handlers)</a>
  </div>
  
    <div class="summary-synopsis"><p>interprets a tagged expression using the tagged reversible representation and
  handlers passed in as a keyword list. Assumes the expression inside the tag has
  already been translated from edn</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#from_elixir/1">from_elixir(elixir_data)</a>
  </div>
  
    <div class="summary-synopsis"><p>safe version of <a href="#from_elixir!/1"><code class="inline">from_elixir!/1</code></a> — the edn string is returned as the second
  element of a pair whose first element is <code class="inline">:ok</code> — if there is an error the first
  element will be <code class="inline">:error</code> and the second the error that was raised</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#from_elixir!/1">from_elixir!(elixir_data)</a>
  </div>
  
    <div class="summary-synopsis"><p>converts an Elixir data structure in the “reversible” format (see below) into
  an edn string. Will raise exceptions if the data structure cannot be converted</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#standard_handlers/0">standard_handlers()</a>
  </div>
  
    <div class="summary-synopsis"><p>handlers for standard edn tagged expressions #inst and #uuid. If you need to supply
   your own custom handlers for other tags, you may wish to append them to this list of
   handlers</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tagged_char_to_string/1">tagged_char_to_string(arg)</a>
  </div>
  
    <div class="summary-synopsis"><p>extracts a char (as a string) from the tagged reversible representation</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tagged_list_to_list/1">tagged_list_to_list(arg)</a>
  </div>
  
    <div class="summary-synopsis"><p>extracts a list from the tagged reversible representation; does not operate at all
  on the contents of the extracted list</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#to_elixir/3">to_elixir(val, converter \\ fn x -&gt; x end, handlers \\ standard_handlers)</a>
  </div>
  
    <div class="summary-synopsis"><p>parses an edn string into an Elixir data structure, but does not throw
 exceptions. The parse result is returned as the second element of a pair
 whose first element is <code class="inline">:ok</code> — if there is an error the first element will
 be <code class="inline">:error</code> and the second the error that was raised</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#to_elixir!/3">to_elixir!(edn, converter \\ fn x -&gt; x end, handlers \\ standard_handlers)</a>
  </div>
  
    <div class="summary-synopsis"><p>parses an edn string into an Elixir data structure; this is not a reversible
   conversion as chars are converted to strings, and tagged expressions are
   interpreted. This function can throw exceptions; for example, if a tagged
   expression cannot be interpreted</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#to_reversible/1">to_reversible(edn)</a>
  </div>
  
    <div class="summary-synopsis"><p>parses an edn string into an Elixir data structure, but in a reversible way —
  chars and tagged expressions are represented using tuples whose first element
  is <code class="inline">:char</code> or <code class="inline">:tag</code>, respectively</p>
</div>
  
</div>

  </div>


          

          

        </section>
      

      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <i class="icon-link"></i>
            </a>
            Functions
          </h1>
          <div class="detail" id="evaluate_tagged_expr/3">
  <div class="detail-header">
    <a href="#evaluate_tagged_expr/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">evaluate_tagged_expr(arg, converter, handlers)</span>
      
  </div>
  
  <section class="docstring">
    <p>  interprets a tagged expression using the tagged reversible representation and
  handlers passed in as a keyword list. Assumes the expression inside the tag has
  already been translated from edn.</p>
<h2>Example:</h2>
<pre><code class="iex elixir">iex&gt; tagged = {:tag, :foo, &quot;blarg&quot;}
iex&gt; handler = fn(_tag, val, _converter, _handlers) -&gt; val &lt;&gt; &quot;-converted&quot; end
iex&gt; Exdn.evaluate_tagged_expr(tagged, [{:foo, handler}]
&quot;blarg-converted&quot;</code></pre>

  </section>
</div>
<div class="detail" id="from_elixir/1">
  <div class="detail-header">
    <a href="#from_elixir/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">from_elixir(elixir_data)</span>
      
  </div>
  
  <section class="docstring">
    <p>  safe version of <a href="#from_elixir!/1"><code class="inline">from_elixir!/1</code></a> — the edn string is returned as the second
  element of a pair whose first element is <code class="inline">:ok</code> — if there is an error the first
  element will be <code class="inline">:error</code> and the second the error that was raised.</p>
<h2>Example:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.from_elixir %{:foo =&gt; {:char, ?a}, {:char, ?b} =&gt; {:tag, :inst, &quot;1985-04-12T23:20:50.52Z&quot;} }
{:ok, &quot;{:foo \a \b #inst &quot;1985-04-12T23:20:50.52Z&quot;}&quot; }</code></pre>

  </section>
</div>
<div class="detail" id="from_elixir!/1">
  <div class="detail-header">
    <a href="#from_elixir!/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">from_elixir!(elixir_data)</span>
      
  </div>
  
  <section class="docstring">
    <p>  converts an Elixir data structure in the “reversible” format (see below) into
  an edn string. Will raise exceptions if the data structure cannot be converted.</p>
<h2>Examples:</h2>
<pre><code class="elixir"># The intermediate representation can be converted back to edn:

iex&gt; Exdn.from_elixir! 41.2
&quot;41.2&quot;

iex&gt; Exdn.from_elixir! :foo
&quot;:foo&quot;

iex&gt; Exdn.from_elixir! true
&quot;true&quot;

iex&gt; Exdn.from_elixir! nil
&quot;nil&quot;

iex&gt; Exdn.from_elixir! &quot;asd&quot;
&quot;&quot;asd&quot;&quot;

iex&gt; Exdn.from_elixir! {:char, ?a}
&quot;\a&quot;

iex&gt; Exdn.from_elixir! {:symbol, :foo}
&quot;foo&quot;

iex&gt; Exdn.from_elixir! [1, :foo]
&quot;[1 :foo]&quot;

iex&gt; Exdn.from_elixir! {:list, [1, :foo]}
&quot;(1 :foo)&quot;

iex&gt; Exdn.from_elixir! MapSet.new([1, :foo])
&quot;#{1 :foo}&quot;

iex&gt; Exdn.from_elixir! %{1 =&gt; :foo, 2 =&gt; :bar}
&quot;{1 :foo 2 :bar}&quot;

iex&gt; Exdn.from_elixir! %SomeStruct{foo: 1, bar: 2}
&quot;{:foo 1 :bar 2}&quot;

iex&gt; Exdn.from_elixir! {:tag, :inst, &quot;1985-04-12T23:20:50.52Z&quot;}
&quot;#inst &quot;1985-04-12T23:20:50.52Z&quot;&quot;</code></pre>

  </section>
</div>
<div class="detail" id="standard_handlers/0">
  <div class="detail-header">
    <a href="#standard_handlers/0" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">standard_handlers()</span>
      
  </div>
  
  <section class="docstring">
    <p>   handlers for standard edn tagged expressions #inst and #uuid. If you need to supply
   your own custom handlers for other tags, you may wish to append them to this list of
   handlers.</p>

  </section>
</div>
<div class="detail" id="tagged_char_to_string/1">
  <div class="detail-header">
    <a href="#tagged_char_to_string/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">tagged_char_to_string(arg)</span>
      
  </div>
  
  <section class="docstring">
    <p>  extracts a char (as a string) from the tagged reversible representation.</p>
<h2>Example:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.tagged_char_to_string {:char, ?a}
&quot;a&quot;</code></pre>

  </section>
</div>
<div class="detail" id="tagged_list_to_list/1">
  <div class="detail-header">
    <a href="#tagged_list_to_list/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">tagged_list_to_list(arg)</span>
      
  </div>
  
  <section class="docstring">
    <p>  extracts a list from the tagged reversible representation; does not operate at all
  on the contents of the extracted list.</p>
<h2>Example:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.tagged_list_to_list {:list, [:foo]}
[:foo]</code></pre>

  </section>
</div>
<div class="detail" id="to_elixir/3">
  <div class="detail-header">
    <a href="#to_elixir/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">to_elixir(val, converter \\ fn x -&gt; x end, handlers \\ standard_handlers)</span>
      
  </div>
  
  <section class="docstring">
    <p> parses an edn string into an Elixir data structure, but does not throw
 exceptions. The parse result is returned as the second element of a pair
 whose first element is <code class="inline">:ok</code> — if there is an error the first element will
 be <code class="inline">:error</code> and the second the error that was raised.</p>
<h2>Examples:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.to_elixir &quot;{1 :foo, 2 :bar}&quot;
{:ok, %{1 =&gt; :foo, 2 =&gt; :bar}}

iex&gt; Exdn.to_elixir &quot;{:foo, \a, \b #foo &quot;blarg&quot; }&quot;
{:error, %RuntimeError{:message =&gt; &quot;Handler not found for tag foo with tagged expression blarg&quot;}}</code></pre>

  </section>
</div>
<div class="detail" id="to_elixir!/3">
  <div class="detail-header">
    <a href="#to_elixir!/3" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">to_elixir!(edn, converter \\ fn x -&gt; x end, handlers \\ standard_handlers)</span>
      
  </div>
  
  <section class="docstring">
    <p>   parses an edn string into an Elixir data structure; this is not a reversible
   conversion as chars are converted to strings, and tagged expressions are
   interpreted. This function can throw exceptions; for example, if a tagged
   expression cannot be interpreted.</p>
<p>   The second (optional) argument</p>
<p>   The third (optional) argument allows you to supply your own handlers for
   the interpretation of tagged expressions. These should be in the form of a
   keyword list. The first element of each pair should be a keyword corresponding
   to the tag, and the second element a function of three parameters
   (tag, value, handlers) that handles the tagged values.</p>
<p>   The one-argument version provides default handlers for #inst and #uuid.</p>
<h2>Examples:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.to_elixir! &quot;41.2&quot;
41.2

iex&gt; Exdn.to_elixir! &quot;:foo&quot;
:foo

iex&gt; Exdn.to_elixir! &quot;true&quot;
true

iex&gt; Exdn.to_elixir! &quot;nil&quot;
nil

iex&gt; Exdn.to_elixir! &quot;&quot;asd&quot;&quot;
&quot;asd&quot;

# Char
iex&gt; Exdn.to_elixir! &quot;\a&quot;
&quot;a&quot;

# Symbol
iex&gt; Exdn.to_elixir! &quot;foo&quot;
{:symbol, :foo}

# edn vectors become Elixir lists:
iex&gt; Exdn.to_elixir! &quot;[1 :foo]&quot;
[1, :foo]

# edn lists are always tagged. Since Datomic is a principal use of edn, and since lists are
# used in Datomic primarily for executable expressions rather than as data structures, we
# use Elixir lists to represent vectors and keep edn lists specially tagged:
iex&gt; Exdn.to_elixir! &quot;(1, :foo)&quot;
{:list, [1, :foo]}

# edn sets become Elixir sets:
iex&gt; Exdn.to_elixir! &quot;#{1 \a 1}&quot;
#MapSet&lt;[1, &quot;a&quot;]&gt;

# Maps become Elixir maps:
iex&gt; Exdn.to_elixir! &quot;{1 :foo, 2 :bar}&quot;
%{1 =&gt; :foo, 2 =&gt; :bar}

# You can also transform maps to Elixir structs by providing your own converter in the second argument:
iex&gt; defmodule FooStruct do
...&gt;    defstruct foo: &quot;default&quot;
...&gt; end
iex&gt; converter = fn map -&gt;
...&gt;    case map do
...&gt;       %{:foo =&gt; _} -&gt; struct(FooStruct, map)
...&gt;       anything_else -&gt; anything_else
...&gt;     end
...&gt;   end
iex&gt;  Exdn.to_elixir! &quot;{:foo 1, :bar 2}&quot;, converter
%FooStruct{foo: 1}

# Tagged expressions are converted. Standard converters for #inst and #uuid are included:
iex&gt; Exdn.to_elixir! &quot;#inst &quot;1985-04-12T23:20:50.52Z&quot;&quot;
%Calendar.DateTime{abbr: &quot;UTC&quot;, day: 12, hour: 23, min: 20, month: 4, sec: 50,
  std_off: 0, timezone: &quot;Etc/UTC&quot;, usec: 520000, utc_off: 0, year: 1985}

iex&gt; Exdn.to_elixir! &quot;#uuid &quot;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;&quot;
&quot;f81d4fae-7dec-11d0-a765-00a0c91e6bf6&quot;

# You can provide your own handlers for tagged expressions:
iex&gt; handler = fn(_tag, val, _handlers) -&gt; val &lt;&gt; &quot;-converted&quot; end
iex&gt; Exdn.to_elixir! &quot;#foo &quot;blarg&quot;&quot;, [{:foo, handler}]
&quot;blarg-converted&quot;</code></pre>

  </section>
</div>
<div class="detail" id="to_reversible/1">
  <div class="detail-header">
    <a href="#to_reversible/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">to_reversible(edn)</span>
      
  </div>
  
  <section class="docstring">
    <p>  parses an edn string into an Elixir data structure, but in a reversible way —
  chars and tagged expressions are represented using tuples whose first element
  is <code class="inline">:char</code> or <code class="inline">:tag</code>, respectively.</p>
<h2>Examples:</h2>
<pre><code class="iex elixir">iex&gt; Exdn.to_reversible( &quot;\a&quot; )
{:char, ?a}

iex&gt; Exdn.to_reversible &quot;#inst &quot;1985-04-12T23:20:50.52Z&quot;&quot;
{:tag, :inst, &quot;1985-04-12T23:20:50.52Z&quot;}

# An unknown tag raises no error when using the reversible conversion:
iex&gt; Exdn.to_reversible &quot;#foo &quot;blarg&quot;&quot;
{:tag, :foo, &quot;blarg&quot;}</code></pre>

  </section>
</div>

        </section>
      

      

      
        <footer class="footer">
      <p>
        <span class="line">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.11.3),
        </span>
        <span class="line">
          designed by
          <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
      </p>
      <button class="night-mode-toggle" />
    </footer>
  </div>
</section>
</div>
  <script src="dist/app-6d2e071366.js"></script>
  </body>
</html>

